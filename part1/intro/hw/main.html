<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js lfe-pdp">

<head>
    <!-- Book generated using mdBook -->
    <meta charset="UTF-8">
    <title>Classic, main - LFE MACHINE MANUAL</title>
    
    


    <!-- Custom HTML head -->
    


    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta name="description" content="The Manual for the Machine that is LFE/OTP">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#ffffff" />

    <link rel="icon" href="../../../favicon.svg">
    <link rel="shortcut icon" href="../../../favicon.png">
    <link rel="stylesheet" href="../../../css/variables.css">
    <link rel="stylesheet" href="../../../css/general.css">
    <link rel="stylesheet" href="../../../css/chrome.css">
    <link rel="stylesheet" href="../../../css/print.css" media="print">

    <!-- Fonts -->
    <link rel="stylesheet" href="../../../FontAwesome/css/font-awesome.css">
    
    <link rel="stylesheet" href="../../../fonts/fonts.css">
    

    <!-- Highlight.js Stylesheets -->
    <link rel="stylesheet" href="../../../highlight.css">
    <link rel="stylesheet" href="../../../tomorrow-night.css">
    <link rel="stylesheet" href="../../../ayu-highlight.css">

    <!-- Custom theme stylesheets -->
    
    <link rel="stylesheet" href="../../../css/custom.css">
    

    
</head>

<body>
    <!-- Provide site root to javascript -->
    <script type="text/javascript">
        var path_to_root = "../../../";
        var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "lfe-pdp" : "lfe-pdp";
    </script>

    <!-- Work around some values being stored in localStorage wrapped in quotes -->
    <script type="text/javascript">
        try {
            var theme = localStorage.getItem('mdbook-theme');
            var sidebar = localStorage.getItem('mdbook-sidebar');

            if (theme.startsWith('"') && theme.endsWith('"')) {
                localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
            }

            if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
            }
        } catch (e) { }
    </script>

    <!-- Set the theme before any content is loaded, prevents flash -->
    <script type="text/javascript">
        var theme;
        try { theme = localStorage.getItem('mdbook-theme'); } catch (e) { }
        if (theme === null || theme === undefined) { theme = default_theme; }
        var html = document.querySelector('html');
        html.classList.remove('no-js')
        html.classList.remove('lfe-pdp')
        html.classList.add(theme);
        html.classList.add('js');
    </script>

    <!-- Hide / unhide sidebar before it is displayed -->
    <script type="text/javascript">
        var html = document.querySelector('html');
        var sidebar = 'hidden';
        if (document.body.clientWidth >= 1080) {
            try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch (e) { }
            sidebar = sidebar || 'visible';
        }
        html.classList.remove('sidebar-visible');
        html.classList.add("sidebar-" + sidebar);
    </script>

    <nav id="sidebar" class="sidebar" aria-label="Table of contents">
        <div class="sidebar-scrollbox">
            <ol class="chapter"><li class="chapter-item affix "><a href="../../../index.html">LFE MACHINE MANUAL</a></li><li class="chapter-item affix "><a href="../../../fm/title-page.html">Title Page</a></li><li class="chapter-item affix "><a href="../../../fm/copyright.html">Copyright</a></li><li class="spacer"></li><li class="chapter-item affix "><a href="../../../preface/index.html">Preface</a></li><li class="chapter-item affix "><a href="../../../preface/about-cover.html">About the Cover</a></li><li class="chapter-item affix "><a href="../../../preface/dedication.html">Dedication</a></li><li class="chapter-item affix "><a href="../../../preface/forward.html">Forward</a></li><li class="chapter-item affix "><a href="../../../preface/acknowledgments.html">Acknowledgments</a></li><li class="spacer"></li><li class="chapter-item expanded "><strong aria-hidden="true">1.</strong> Part I - Getting Started<a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../part1/intro/index.html"><strong aria-hidden="true">1.1.</strong> Introduction</a></li><li class="chapter-item "><a href="../../../part1/intro/prereq.html"><strong aria-hidden="true">1.2.</strong> Prerequisites</a></li><li class="chapter-item "><a href="../../../part1/intro/conventions.html"><strong aria-hidden="true">1.3.</strong> Conventions</a></li><li class="chapter-item "><a href="../../../part1/intro/setup.html"><strong aria-hidden="true">1.4.</strong> Development Setup</a></li><li class="chapter-item expanded "><a href="../../../part1/intro/hw/index.html"><strong aria-hidden="true">1.5.</strong> 'Hello, World!'</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../part1/intro/hw/repl.html"><strong aria-hidden="true">1.5.1.</strong> Classic, REPL</a></li><li class="chapter-item expanded "><a href="../../../part1/intro/hw/main.html" class="active"><strong aria-hidden="true">1.5.2.</strong> Classic, main</a></li><li class="chapter-item "><a href="../../../part1/intro/hw/otp.html"><strong aria-hidden="true">1.5.3.</strong> LFE/OTP</a></li></ol></li><li class="chapter-item "><a href="../../../part1/intro/guessing-game/index.html"><strong aria-hidden="true">1.6.</strong> Walk-through: An LFE Guessing Game</a></li></ol></li><li class="chapter-item "><strong aria-hidden="true">2.</strong> Part II - Code as Data<a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../part2/data-types/index.html"><strong aria-hidden="true">2.1.</strong> Primitive Types</a></li><li class="chapter-item "><a href="../../../part2/patterns/index.html"><strong aria-hidden="true">2.2.</strong> Pattern Matching</a></li><li class="chapter-item "><a href="../../../part2/mani-list/index.html"><strong aria-hidden="true">2.3.</strong> Manipulating List Structure</a></li><li class="chapter-item "><a href="../../../part2/symbols/index.html"><strong aria-hidden="true">2.4.</strong> Symbols</a></li><li class="chapter-item "><a href="../../../part2/numbers/index.html"><strong aria-hidden="true">2.5.</strong> Numbers</a></li><li class="chapter-item "><a href="../../../part2/arrays/index.html"><strong aria-hidden="true">2.6.</strong> Arrays</a></li><li class="chapter-item "><a href="../../../part2/dicts/index.html"><strong aria-hidden="true">2.7.</strong> Dicts</a></li><li class="chapter-item "><a href="../../../part2/records/index.html"><strong aria-hidden="true">2.8.</strong> Records</a></li><li class="chapter-item "><a href="../../../part2/gen-seq/index.html"><strong aria-hidden="true">2.9.</strong> Generic Sequence Functions</a></li><li class="chapter-item "><a href="../../../part2/chr-str/index.html"><strong aria-hidden="true">2.10.</strong> Characters and Strings</a></li><li class="chapter-item "><a href="../../../part2/byte-bin/index.html"><strong aria-hidden="true">2.11.</strong> Bytes and Binaries</a></li></ol></li><li class="chapter-item "><strong aria-hidden="true">3.</strong> Part III - Data as Code<a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../part3/funs/index.html"><strong aria-hidden="true">3.1.</strong> Functions</a></li><li class="chapter-item "><a href="../../../part3/closures/index.html"><strong aria-hidden="true">3.2.</strong> Closures</a></li><li class="chapter-item "><a href="../../../part3/eval/index.html"><strong aria-hidden="true">3.3.</strong> Evaluation</a></li><li class="chapter-item "><a href="../../../part3/expressioins/index.html"><strong aria-hidden="true">3.4.</strong> Expressions</a></li><li class="chapter-item "><a href="../../../part3/processes/index.html"><strong aria-hidden="true">3.5.</strong> Processes</a></li><li class="chapter-item "><a href="../../../part3/msgs/index.html"><strong aria-hidden="true">3.6.</strong> Messages and Their Passing</a></li><li class="chapter-item "><a href="../../../part3/objects/index.html"><strong aria-hidden="true">3.7.</strong> Objects and Flavors</a></li><li class="chapter-item "><a href="../../../part3/io/index.html"><strong aria-hidden="true">3.8.</strong> I/O</a></li><li class="chapter-item "><a href="../../../part3/files/index.html"><strong aria-hidden="true">3.9.</strong> Accessing Files</a></li><li class="chapter-item "><a href="../../../part3/modules/index.html"><strong aria-hidden="true">3.10.</strong> Modules</a></li><li class="chapter-item "><a href="../../../part3/packages/index.html"><strong aria-hidden="true">3.11.</strong> Packages</a></li><li class="chapter-item "><a href="../../../part3/scripting/index.html"><strong aria-hidden="true">3.12.</strong> Scripting with LFE</a></li></ol></li><li class="chapter-item "><strong aria-hidden="true">4.</strong> Part IV - Advanced Topics<a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../part4/err-debug/index.html"><strong aria-hidden="true">4.1.</strong> Errors and Debugging</a></li><li class="chapter-item "><a href="../../../part4/unit/index.html"><strong aria-hidden="true">4.2.</strong> Writing Unit Tests</a></li><li class="chapter-item "><a href="../../../part4/ct/index.html"><strong aria-hidden="true">4.3.</strong> The Common Test Framework</a></li><li class="chapter-item "><a href="../../../part4/propr/index.html"><strong aria-hidden="true">4.4.</strong> The Propr Test Framework</a></li><li class="chapter-item "><a href="../../../part4/compiler/index.html"><strong aria-hidden="true">4.5.</strong> The Compiler</a></li><li class="chapter-item "><a href="../../../part4/macros/index.html"><strong aria-hidden="true">4.6.</strong> Macros</a></li><li class="chapter-item "><a href="../../../part4/dist/index.html"><strong aria-hidden="true">4.7.</strong> Distributed LFE</a></li><li class="chapter-item "><a href="../../../part4/ports/REAEDME.html"><strong aria-hidden="true">4.8.</strong> Ports and Port Drivers</a></li><li class="chapter-item "><a href="../../../part4/servers/REAEDME.html"><strong aria-hidden="true">4.9.</strong> Servers</a></li><li class="chapter-item "><a href="../../../part4/clients/REAEDME.html"><strong aria-hidden="true">4.10.</strong> Clients</a></li></ol></li><li class="chapter-item "><strong aria-hidden="true">5.</strong> Part V - OTP<a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../part5/behaviours/index.html"><strong aria-hidden="true">5.1.</strong> Behaviours</a></li><li class="chapter-item "><a href="../../../part5/apps/index.html"><strong aria-hidden="true">5.2.</strong> Applications</a></li><li class="chapter-item "><a href="../../../part5/rels/index.html"><strong aria-hidden="true">5.3.</strong> Releases</a></li><li class="chapter-item "><a href="../../../part5/data/index.html"><strong aria-hidden="true">5.4.</strong> Tables and Databases</a></li><li class="chapter-item "><a href="../../../part5/project/index.html"><strong aria-hidden="true">5.5.</strong> Example OTP Project</a></li></ol></li><li class="chapter-item "><strong aria-hidden="true">6.</strong> Part VI - Conclusion<a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../part6/epilogue.html"><strong aria-hidden="true">6.1.</strong> Epilogue</a></li><li class="chapter-item "><a href="../../../part6/afterward.html"><strong aria-hidden="true">6.2.</strong> Afterword</a></li><li class="spacer"></li></ol></li><li class="chapter-item "><a href="../../../epilogue/glossary.html">Glossary</a></li><li class="chapter-item affix "><a href="../../../epilogue/bibliography.html">Bibliography</a></li><li class="chapter-item affix "><a href="../../../epilogue/index.html">Index</a></li><li class="spacer"></li><li class="chapter-item affix ">Appendices</li><li class="chapter-item affix "><a href="../../../appendices/lisp-history.html">I - Origins Of Lisp</a></li><li class="chapter-item affix "><a href="../../../appendices/erlang-history.html">II - Origins Of Erlang</a></li><li class="chapter-item affix "><a href="../../../appendices/lfe-overview.html">III - Origins Of LFE</a></li><li class="spacer"></li><li class="chapter-item affix "><a href="../../../feedback.html">Feedback</a></li><li class="chapter-item affix "><a href="../../../redirects/docs.html">LFE Documentation</a></li><li class="chapter-item affix "><a href="../../../redirects/rebar3.html">LFE rebar3 Plugin</a></li><li class="chapter-item affix "><a href="../../../redirects/mdbook.html">Built with mdBook</a></li></ol>
        </div>
        <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
    </nav>

    <div id="page-wrapper" class="page-wrapper">

        <div class="page">
            
            <div id="menu-bar-hover-placeholder"></div>
            <div id="menu-bar" class="menu-bar sticky bordered">
                <div class="left-buttons">
                    <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents"
                        aria-label="Toggle Table of Contents" aria-controls="sidebar">
                        <i class="fa fa-bars"></i>
                    </button>
                    <button id="theme-toggle" class="icon-button" type="button" title="Change theme"
                        aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                        <i class="fa fa-paint-brush"></i>
                    </button>
                    <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                        <li role="none"><button role="menuitem" class="theme"
                                id="lfe-pdp">LFE PDP</button></li>
                        <li role="none"><button role="menuitem" class="theme"
                                id="light">Light</button></li>
                        <li role="none"><button role="menuitem" class="theme"
                                id="rust">Rust</button></li>
                        <li role="none"><button role="menuitem" class="theme"
                                id="coal">Coal</button></li>
                        <li role="none"><button role="menuitem" class="theme"
                                id="navy">Navy</button></li>
                        <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button>
                        </li>
                    </ul>
                    
                    <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)"
                        aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S"
                        aria-controls="searchbar">
                        <i class="fa fa-search"></i>
                    </button>
                    
                </div>

                <h1 class="menu-title">LFE MACHINE MANUAL</h1>

                <div class="right-buttons">
                    <a href="../../../print.html" title="Print this book" aria-label="Print this book">
                        <i id="print-button" class="fa fa-print"></i>
                    </a>
                    
                    <a href="https://github.com/cnbbooks/lfe-manual" title="Git repository" aria-label="Git repository">
                        <i id="git-repository-button" class="fa fa-github"></i>
                    </a>
                    
                </div>
            </div>

            
            <div id="search-wrapper" class="hidden">
                <form id="searchbar-outer" class="searchbar-outer">
                    <input type="search" name="search" id="searchbar" name="searchbar"
                        placeholder="Search this book ..." aria-controls="searchresults-outer"
                        aria-describedby="searchresults-header">
                </form>
                <div id="searchresults-outer" class="searchresults-outer hidden">
                    <div id="searchresults-header" class="searchresults-header"></div>
                    <ul id="searchresults">
                    </ul>
                </div>
            </div>
            

            <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
            <script type="text/javascript">
                document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                Array.from(document.querySelectorAll('#sidebar a')).forEach(function (link) {
                    link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                });
            </script>

            <div id="content" class="content">
                <main>
                    <h1><a class="header" href="#from-the-command-line" id="from-the-command-line">From the Command Line</a></h1>
<p>From your system shell prompt, run the following to create a new project that will let us run a Hello-World program from the command line:</p>
<pre><code class="language-shell">rebar3 new lfe-main hello-world
cd ./hello-world
</code></pre>
<p>Once in the project directory, you can actually just do this:</p>
<pre><code class="language-shell">rebar3 lfe run
</code></pre>
<p>You will see code getting downloaded and compiled, and then your script will run, generating the following output:</p>
<pre><code class="language-text">Running script '/usr/local/bin/rebar3' with args [] ...
'hello-world
</code></pre>
<p>When you created a new LFE project of type 'main', a Hello-World function was automatically generated for you, one that's even simpler than what we created in the previous section:</p>
<pre><code class="language-lisp">(defun my-fun ()
  'hello-world)
</code></pre>
<p>The other code that was created when we executed <code>rebar3 new lfe-main hello-world</code> was a script meant to be used by LFE with LFE acting as a shell interpreter:</p>
<pre><code class="language-lisp">#!/usr/bin/env lfescript

(defun main (args)
  (let ((script-name (escript:script_name)))
    (io:format &quot;Running script '~s' with args ~p ...~n&quot; `(,script-name ,args))
    (io:format &quot;~p~n&quot; `(,(hello-world:my-fun)))))
</code></pre>
<p>You may be wondering about the <code>args</code> argument to the <code>main</code> function, and the fact that the printed output for the <code>args</code> when we ran this was <code>[]</code>. Let's try something:</p>
<pre><code class="language-shell">rebar3 lfe run -- Fenchurch 42
</code></pre>
<pre><code class="language-text">Running script '/usr/local/bin/rebar3' with args [&lt;&lt;&quot;Fenchurch&quot;&gt;&gt;,&lt;&lt;&quot;42&quot;&gt;&gt;] ...
'hello-world'
</code></pre>
<p>We have to provide the two dashes to let <code>rebar3</code> know that we're done with it, that the follow argsuments are not for it, but rather for the program we want it to start for us. So it passes everything after the <code>--</code> to our script.</p>
<p>As for the code itself, it's tiny. But there is a lot going on just with these two files. HAve no fear, though: the remainder of this book will explore all of that and more. For now, know that the main function in the executable is calling the <code>hello-world</code> module's <code>my-fun</code> function, which takes no arguments. To put another way, what we really have here is a tiny, trivial library project with the addition of a script that calls a function from that library.</p>
<p>For know just know that an executable file which starts with <code>#!/usr/bin/env lfescript</code> and contains a <code>main</code> function accepting one argument is an LFE script capable of being executed from the command line -- a we have shown!</p>

                </main>

                <nav class="nav-wrapper" aria-label="Page navigation">
                    <!-- Mobile navigation buttons -->
                    
                    <a rel="prev" href="../../../part1/intro/hw/repl.html" class="mobile-nav-chapters previous"
                        title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    

                    
                    <a rel="next" href="../../../part1/intro/hw/otp.html" class="mobile-nav-chapters next"
                        title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                    

                    <div style="clear: both"></div>
                </nav>
            </div>
        </div>

        <nav class="nav-wide-wrapper" aria-label="Page navigation">
            
            <a rel="prev" href="../../../part1/intro/hw/repl.html" class="nav-chapters previous" title="Previous chapter"
                aria-label="Previous chapter" aria-keyshortcuts="Left">
                <i class="fa fa-angle-left"></i>
            </a>
            

            
            <a rel="next" href="../../../part1/intro/hw/otp.html" class="nav-chapters next" title="Next chapter"
                aria-label="Next chapter" aria-keyshortcuts="Right">
                <i class="fa fa-angle-right"></i>
            </a>
            
        </nav>

    </div>

    

    
    <!-- Google Analytics Tag -->
    <script type="text/javascript">
        var localAddrs = ["localhost", "127.0.0.1", ""];

        // make sure we don't activate google analytics if the developer is
        // inspecting the book locally...
        if (localAddrs.indexOf(document.location.hostname) === -1) {
            (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date(); a = s.createElement(o),
                m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
            })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

            ga('create', 'UA-38274766-4', 'auto');
            ga('send', 'pageview');
        }
    </script>
    

    

    
    <script type="text/javascript">
        window.playground_copyable = true;
    </script>
    

    

    
    <script src="../../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../mark.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../searcher.js" type="text/javascript" charset="utf-8"></script>
    

    <script src="../../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../highlight.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../book.js" type="text/javascript" charset="utf-8"></script>

    <!-- Custom JS scripts -->
    

    

</body>

</html>
